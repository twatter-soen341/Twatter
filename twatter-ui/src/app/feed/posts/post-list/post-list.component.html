<!--Fetch the array of post and makes a mat-card model for each post in the array-->
<div *ngIf="posts && posts.length > 0">
  <mat-card *ngFor="let post of (posts | slice: 0:limit); let i = index">
    <mat-card-header>
      <div mat-card-avatar class="card-header-image" (click)="goToProfile(post.userId)"></div>
      <mat-card-title>{{ post.firstName }} {{ post.lastName }}</mat-card-title>
      <mat-card-subtitle>{{ post.timeStamp }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <ng-scrollbar class="scrollbar">
        <div [innerHTML]="post.content" class="post-list"></div>
      </ng-scrollbar>
    </mat-card-content>

    <!--user actions that are available after post creation-->
    <mat-card-actions align="end">
      <!--checks if the post has been liked by the user, if yes color red else color dark-->
      <!--Emits event onclick that updates the post to be liked/unliked by user on the backend-->
      <app-twat-icon-btn [likes]="post.likedBy" [liked] = "isLikedByUser(post)" (clickEvent) = "likePost(post, $event)" >l</app-twat-icon-btn>
        <button mat-icon-button *ngIf="!simplified"><mat-icon color="accent">share</mat-icon></button>
        <div *ngIf="isUser(post.userId) && !simplified">
          <button mat-icon-button *ngIf="!simplified" (click)="onEdit(post.id)"><mat-icon color="accent">edit</mat-icon></button>
          <button mat-icon-button *ngIf="!simplified" (click)="onDelete(post.id)"><mat-icon color="primary">delete</mat-icon></button>
        </div>
    </mat-card-actions>

  <mat-card-content *ngIf="!simplified">
    <mat-divider></mat-divider>
    <app-comment [comments]="post.comments.reverse()" [post] ="post" (deleted)="deleteComment(post, $event)" (commented)="commentPost(post, $event)" (edited)="editComment(post, $event)"></app-comment>
  </mat-card-content>
  </mat-card>
</div>

<div *ngIf="posts && posts.length == 0 && !simplified" style="margin-top: 7rem;">
  <p class="info-text mat-display-1">
    No Twats added yet...
  </p>
</div>
