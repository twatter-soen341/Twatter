
<!--Fetch the array of post and makes a mat-card model for each post in the array-->
<div *ngIf="posts.length > 0">
  <mat-card *ngFor="let post of posts">
    <mat-card-header>
      <div mat-card-avatar class="card-header-image" routerLink="/profile"></div>
      <mat-card-title>{{ post.firstName }} {{ post.lastName }}</mat-card-title>
      <mat-card-subtitle>{{ post.timeStamp }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <ng-scrollbar class="scrollbar">
        <div [innerHTML]="post.content" class="post-list"></div>
      </ng-scrollbar>
    </mat-card-content>

    <!--user actions that are available after post creation-->
    <mat-card-actions align="end">
      <!--checks if the post has been liked by the user, if yes color red else color dark-->
      <!--Emits event onclick that updates the post to be liked/unliked by user on the backend-->
      <app-twat-icon-btn [liked] = "isLikedByUser(post)" (clickEvent) = "likePost(post, $event)" >l</app-twat-icon-btn>
      <div class="likeCounter">
        <!--TODO: onClick-> open dialog and fetch all username by userId stored in LikedBy -->
        <h5>{{post.likedBy.length}}</h5>
      </div>
      <button mat-button>SHARE</button>
      <div *ngIf="isUser(post.userId)">
        <button mat-button (click)="onEdit(post.id)">EDIT</button>
        <button mat-button (click)="onDelete(post.id)">DELETE</button>
      </div>
    </mat-card-actions>

  <mat-card-content>
    <mat-divider></mat-divider>
    <app-comment [comments]="post.comments" [postId] ="post.id" (commented)="commentPost(post, $event)"></app-comment>
  </mat-card-content>
  </mat-card>
</div>

<div *ngIf="posts.length == 0" style="margin-top: 7rem;">
  <p class="info-text mat-display-1">
    No Twats added yet...
  </p>
</div>
